<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="generator" content="ApiGen 2.8.0" />

	<title>Class React\Socket\LimitingServer | Ratchet</title>

	<script type="text/javascript" src="resources/combined.js?1933933094"></script>
	<script type="text/javascript" src="elementlist.js?2449285623"></script>
	<link rel="stylesheet" type="text/css" media="all" href="resources/style.css?3505392360" />

</head>

<body>
<div id="left">
	<div id="menu">
		<a href="index.html" title="Overview"><span>Overview</span></a>


		<div id="groups">
			<h3>Namespaces</h3>
			<ul>
				<li><a href="namespace-Evenement.html">Evenement</a>
						</li>
				<li><a href="namespace-None.html">None</a>
						</li>
				<li><a href="namespace-PHP.html">PHP</a>
						</li>
				<li><a href="namespace-Psr.html">Psr<span></span></a>
						<ul>
				<li><a href="namespace-Psr.Http.html">Http<span></span></a>
						<ul>
				<li><a href="namespace-Psr.Http.Message.html">Message</a>
						</li>
							</ul></li></ul></li>
				<li><a href="namespace-Ratchet.html">Ratchet<span></span></a>
						<ul>
				<li><a href="namespace-Ratchet.Http.html">Http</a>
						</li>
				<li><a href="namespace-Ratchet.RFC6455.html">RFC6455<span></span></a>
						<ul>
				<li><a href="namespace-Ratchet.RFC6455.Handshake.html">Handshake</a>
						</li>
				<li><a href="namespace-Ratchet.RFC6455.Messaging.html">Messaging</a>
						</li>
							</ul></li>
				<li><a href="namespace-Ratchet.Server.html">Server</a>
						</li>
				<li><a href="namespace-Ratchet.Session.html">Session<span></span></a>
						<ul>
				<li><a href="namespace-Ratchet.Session.Serialize.html">Serialize</a>
						</li>
				<li><a href="namespace-Ratchet.Session.Storage.html">Storage<span></span></a>
						<ul>
				<li><a href="namespace-Ratchet.Session.Storage.Proxy.html">Proxy</a>
						</li>
							</ul></li></ul></li>
				<li><a href="namespace-Ratchet.Wamp.html">Wamp</a>
						</li>
				<li><a href="namespace-Ratchet.WebSocket.html">WebSocket</a>
						</li>
							</ul></li>
				<li class="active"><a href="namespace-React.html">React<span></span></a>
						<ul>
				<li><a href="namespace-React.EventLoop.html">EventLoop<span></span></a>
						<ul>
				<li><a href="namespace-React.EventLoop.Tick.html">Tick</a>
						</li>
				<li><a href="namespace-React.EventLoop.Timer.html">Timer</a>
						</li>
							</ul></li>
				<li class="active"><a href="namespace-React.Socket.html">Socket</a>
						</li>
				<li><a href="namespace-React.Stream.html">Stream</a>
						</li>
							</ul></li>
				<li><a href="namespace-Symfony.html">Symfony<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.html">Component<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.HttpFoundation.html">HttpFoundation<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.HttpFoundation.Session.html">Session<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.HttpFoundation.Session.Attribute.html">Attribute</a>
						</li>
				<li><a href="namespace-Symfony.Component.HttpFoundation.Session.Flash.html">Flash</a>
						</li>
				<li><a href="namespace-Symfony.Component.HttpFoundation.Session.Storage.html">Storage<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.HttpFoundation.Session.Storage.Handler.html">Handler</a>
						</li>
				<li><a href="namespace-Symfony.Component.HttpFoundation.Session.Storage.Proxy.html">Proxy</a>
						</li>
							</ul></li></ul></li></ul></li>
				<li><a href="namespace-Symfony.Component.Routing.html">Routing<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.Routing.Annotation.html">Annotation</a>
						</li>
				<li><a href="namespace-Symfony.Component.Routing.Exception.html">Exception</a>
						</li>
				<li><a href="namespace-Symfony.Component.Routing.Generator.html">Generator<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.Routing.Generator.Dumper.html">Dumper</a>
						</li>
							</ul></li>
				<li><a href="namespace-Symfony.Component.Routing.Loader.html">Loader<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.Routing.Loader.DependencyInjection.html">DependencyInjection</a>
						</li>
							</ul></li>
				<li><a href="namespace-Symfony.Component.Routing.Matcher.html">Matcher<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.Routing.Matcher.Dumper.html">Dumper</a>
						</li>
							</ul></li>
				<li><a href="namespace-Symfony.Component.Routing.Tests.html">Tests<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Annotation.html">Annotation</a>
						</li>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Fixtures.html">Fixtures<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Fixtures.AnnotatedClasses.html">AnnotatedClasses</a>
						</li>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Fixtures.OtherAnnotatedClasses.html">OtherAnnotatedClasses</a>
						</li>
							</ul></li>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Generator.html">Generator<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Generator.Dumper.html">Dumper</a>
						</li>
							</ul></li>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Loader.html">Loader</a>
						</li>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Matcher.html">Matcher<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Matcher.Dumper.html">Dumper</a>
						</li>
							</ul></li></ul></li></ul></li></ul></li></ul></li>
			</ul>
		</div>

		<hr />


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li><a href="class-React.Socket.Connector.html">Connector</a></li>
				<li><a href="class-React.Socket.DnsConnector.html">DnsConnector</a></li>
				<li class="active"><a href="class-React.Socket.LimitingServer.html">LimitingServer</a></li>
				<li><a href="class-React.Socket.SecureConnector.html">SecureConnector</a></li>
				<li><a href="class-React.Socket.SecureServer.html">SecureServer</a></li>
				<li><a href="class-React.Socket.Server.html">Server</a></li>
				<li><a href="class-React.Socket.TcpConnector.html">TcpConnector</a></li>
				<li><a href="class-React.Socket.TimeoutConnector.html">TimeoutConnector</a></li>
				<li><a href="class-React.Socket.UnixConnector.html">UnixConnector</a></li>
			</ul>

			<h3>Interfaces</h3>
			<ul>
				<li><a href="class-React.Socket.ConnectionInterface.html">ConnectionInterface</a></li>
				<li><a href="class-React.Socket.ConnectorInterface.html">ConnectorInterface</a></li>
				<li><a href="class-React.Socket.ServerInterface.html">ServerInterface</a></li>
			</ul>




		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
<div id="rightInner">
	<form id="search">
		<input type="hidden" name="cx" value="" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text" name="q" class="text" />
		<input type="submit" value="Search" />
	</form>

	<div id="navigation">
		<ul>
			<li>
				<a href="index.html" title="Overview"><span>Overview</span></a>
			</li>
			<li>
				<a href="namespace-React.Socket.html" title="Summary of React\Socket"><span>Namespace</span></a>
			</li>
			<li class="active">
<span>Class</span>			</li>
		</ul>
		<ul>
			<li>
				<a href="tree.html" title="Tree view of classes, interfaces, traits and exceptions"><span>Tree</span></a>
			</li>
		</ul>
		<ul>
		</ul>
	</div>

<div id="content" class="class">
	<h1>Class LimitingServer</h1>


	<div class="description">
	
<p>The <code>LimitingServer</code> decorator wraps a given
<code>ServerInterface</code> and is responsible for limiting and keeping track
of open connections to this server instance.</p>

<p>Whenever the underlying server emits a <code>connection</code> event, it will
check its limits and then either</p>

<ul>
	<li>keep track of this connection by adding it to the list of open connections
	and then forward the <code>connection</code> event</li>

	<li>or reject (close) the connection when its limits are exceeded and will
	forward an <code>error</code> event instead.</li>
</ul>

<p>Whenever a connection closes, it will remove this connection from the list of
open connections.</p>

<p><code>`</code>php $server = new LimitingServer($server, 100);
$server-&gt;on('connection', function (ConnectionInterface $connection) {
$connection-&gt;write('hello there!' . PHP_EOL); … }); <code>`</code></p>

<p>See also the <code>ServerInterface</code> for more details.</p>

	</div>

	<dl class="tree">
		<dd style="padding-left:0px">
			<a href="class-Evenement.EventEmitter.html"><span>Evenement\EventEmitter</span></a>
			
			 implements 
				<a href="class-Evenement.EventEmitterInterface.html"><span>Evenement\EventEmitterInterface</span></a>
			
			 uses 
				<a href="class-Evenement.EventEmitterTrait.html"><span>Evenement\EventEmitterTrait</span></a>
			
		</dd>
		<dd style="padding-left:30px">
			<img src="resources/inherit.png" alt="Extended by" />
<b><span>React\Socket\LimitingServer</span></b>			
			 implements 
				<a href="class-React.Socket.ServerInterface.html"><span>React\Socket\ServerInterface</span></a>
			
			
		</dd>
	</dl>








	<div class="info">
		
		
		<b>Namespace:</b> <a href="namespace-React.html">React</a>\<a href="namespace-React.Socket.html">Socket</a><br />
		

				<b>See:</b>
				<code><code><a href="class-React.Socket.ServerInterface.html">React\Socket\ServerInterface</a></code></code><br />
				<b>See:</b>
				<code><code><a href="class-React.Socket.ConnectionInterface.html">React\Socket\ConnectionInterface</a></code></code><br />
		<b>Located at</b> <a href="source-class-React.Socket.LimitingServer.html#7-201" title="Go to source code">LimitingServer.php</a><br />
	</div>



	<table class="summary" id="methods">
	<caption>Methods summary</caption>
	<tr data-order="__construct" id="___construct">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#___construct">#</a>
		<code><a href="source-class-React.Socket.LimitingServer.html#44-103" title="Go to source code">__construct</a>( <span><code><a href="class-React.Socket.ServerInterface.html">React\Socket\ServerInterface</a></code> <var>$server</var></span>, <span>integer|null <var>$connectionLimit</var></span>, <span>boolean <var>$pauseOnLimit</var> = <span class="php-keyword1">false</span></span> )</code>

		<div class="description short">
			
<p>Instantiates a new LimitingServer.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Instantiates a new LimitingServer.</p>

<p>You have to pass a maximum number of open connections to ensure the server
will automatically reject (close) connections once this limit is exceeded. In
this case, it will emit an <code>error</code> event to inform about this and no
<code>connection</code> event will be emitted.</p>

<p><code>`</code>php $server = new LimitingServer($server, 100);
$server-&gt;on('connection', function (ConnectionInterface $connection) {
$connection-&gt;write('hello there!' . PHP_EOL); … }); <code>`</code></p>

<p>You MAY pass a <code>null</code> limit in order to put no limit on the number
of open connections and keep accepting new connection until you run out of
operating system resources (such as open file handles). This may be useful it
you do not want to take care of applying a limit but still want to use the
<code>getConnections()</code> method.</p>

<p>You can optionally configure the server to pause accepting new connections
once the connection limit is reached. In this case, it will pause the underlying
server and no longer process any new connections at all, thus also no longer
closing any excessive connections. The underlying operating system is
responsible for keeping a backlog of pending connections until its limit is
reached, at which point it will start rejecting further connections. Once the
server is below the connection limit, it will continue consuming connections
from the backlog and will process any outstanding data on each connection. This
mode may be useful for some protocols that are designed to wait for a response
message (such as HTTP), but may be less useful for other protocols that demand
immediate responses (such as a "welcome" message in an interactive chat).</p>

<p><code>`</code>php $server = new LimitingServer($server, 100, true);
$server-&gt;on('connection', function (ConnectionInterface $connection) {
$connection-&gt;write('hello there!' . PHP_EOL); … }); <code>`</code></p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$server</var></dt>
					<dd><code><code><a href="class-React.Socket.ServerInterface.html">React\Socket\ServerInterface</a></code></code><br>$server</dd>
					<dt><var>$connectionLimit</var></dt>
					<dd><code>integer|null</code><br>$connectionLimit</dd>
					<dt><var>$pauseOnLimit</var></dt>
					<dd><code>boolean</code><br>$pauseOnLimit</dd>
				</dl></div>





		</div>
		</div></td>
	</tr>
	<tr data-order="getConnections" id="_getConnections">

		<td class="attributes"><code>
			 public 
			<code><a href="class-React.Socket.ConnectionInterface.html">React\Socket\ConnectionInterface</a>[]</code>
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_getConnections">#</a>
		<code><a href="source-class-React.Socket.LimitingServer.html#105-119" title="Go to source code">getConnections</a>( )</code>

		<div class="description short">
			
<p>Returns an array with all currently active connections</p>

		</div>

		<div class="description detailed hidden">
			
<p>Returns an array with all currently active connections</p>

<p><code>`</code>php foreach ($server-&gt;getConnection() as $connection) {
$connection-&gt;write('Hi!'); } <code>`</code></p>




				<h4>Returns</h4>
				<div class="list">
					<code><code><a href="class-React.Socket.ConnectionInterface.html">React\Socket\ConnectionInterface</a>[]</code></code><br />
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="getAddress" id="_getAddress">

		<td class="attributes"><code>
			 public 
			?string
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_getAddress">#</a>
		<code><a href="source-class-React.Socket.LimitingServer.html#121-124" title="Go to source code">getAddress</a>( )</code>

		<div class="description short">
			
<p>Returns the full address (IP and port) this server is currently listening
on</p>

		</div>

		<div class="description detailed hidden">
			
<p>Returns the full address (IP and port) this server is currently listening
on</p>

<p><code>`</code>php $address = $server-&gt;getAddress(); echo 'Server listening
on ' . $address . PHP_EOL; <code>`</code></p>

<p>It will return the full address (IP and port) or <code>NULL</code> if it is
unknown (not applicable to this server socket or already closed).</p>

<p>If this is a TCP/IP based server and you only want the local port, you may
use something like this:</p>

<p><code>`</code>php $address = $server-&gt;getAddress(); $port =
parse_url('tcp://' . $address, PHP_URL_PORT); echo 'Server listening on port ' .
$port . PHP_EOL; <code>`</code></p>




				<h4>Returns</h4>
				<div class="list">
					<code>?string</code><br>the full listening address (IP and port) or NULL if it is unknown (not
applicable to this server socket or already closed)<br />
				</div>




				<h4>Implementation of</h4>
				<div class="list"><code><a href="class-React.Socket.ServerInterface.html#_getAddress">React\Socket\ServerInterface::getAddress()</a></code></div>
		</div>
		</div></td>
	</tr>
	<tr data-order="pause" id="_pause">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_pause">#</a>
		<code><a href="source-class-React.Socket.LimitingServer.html#126-135" title="Go to source code">pause</a>( )</code>

		<div class="description short">
			
<p>Pauses accepting new incoming connections.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Pauses accepting new incoming connections.</p>

<p>Removes the socket resource from the EventLoop and thus stop accepting new
connections. Note that the listening socket stays active and is not closed.</p>

<p>This means that new incoming connections will stay pending in the operating
system backlog until its configurable backlog is filled. Once the backlog is
filled, the operating system may reject further incoming connections until the
backlog is drained again by resuming to accept new connections.</p>

<p>Once the server is paused, no futher <code>connection</code> events SHOULD be
emitted.</p>

<p><code>`</code>php $server-&gt;pause();</p>

<p>$server-&gt;on('connection', assertShouldNeverCalled()); <code>`</code></p>

<p>This method is advisory-only, though generally not recommended, the server
MAY continue emitting <code>connection</code> events.</p>

<p>Unless otherwise noted, a successfully opened server SHOULD NOT start in
paused state.</p>

<p>You can continue processing events by calling <code>resume()</code>
again.</p>

<p>Note that both methods can be called any number of times, in particular
calling <code>pause()</code> more than once SHOULD NOT have any effect.
Similarly, calling this after <code>close()</code> is a NO-OP.</p>






				<h4>See</h4>
				<div class="list">
						<code><code><a href="class-React.Socket.LimitingServer.html#_resume">React\Socket\LimitingServer::resume()</a></code></code><br />
				</div>


				<h4>Implementation of</h4>
				<div class="list"><code><a href="class-React.Socket.ServerInterface.html#_pause">React\Socket\ServerInterface::pause()</a></code></div>
		</div>
		</div></td>
	</tr>
	<tr data-order="resume" id="_resume">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_resume">#</a>
		<code><a href="source-class-React.Socket.LimitingServer.html#137-146" title="Go to source code">resume</a>( )</code>

		<div class="description short">
			
<p>Resumes accepting new incoming connections.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Resumes accepting new incoming connections.</p>

<p>Re-attach the socket resource to the EventLoop after a previous
<code>pause()</code>.</p>

<p><code>`</code>php $server-&gt;pause();</p>

<p>$loop-&gt;addTimer(1.0, function () use ($server) { $server-&gt;resume(); });
<code>`</code></p>

<p>Note that both methods can be called any number of times, in particular
calling <code>resume()</code> without a prior <code>pause()</code> SHOULD NOT
have any effect. Similarly, calling this after <code>close()</code> is a
NO-OP.</p>






				<h4>See</h4>
				<div class="list">
						<code><code><a href="class-React.Socket.LimitingServer.html#_pause">React\Socket\LimitingServer::pause()</a></code></code><br />
				</div>


				<h4>Implementation of</h4>
				<div class="list"><code><a href="class-React.Socket.ServerInterface.html#_resume">React\Socket\ServerInterface::resume()</a></code></div>
		</div>
		</div></td>
	</tr>
	<tr data-order="close" id="_close">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_close">#</a>
		<code><a href="source-class-React.Socket.LimitingServer.html#148-151" title="Go to source code">close</a>( )</code>

		<div class="description short">
			
<p>Shuts down this listening socket</p>

		</div>

		<div class="description detailed hidden">
			
<p>Shuts down this listening socket</p>

<p>This will stop listening for new incoming connections on this socket.</p>

<p>Calling this method more than once on the same instance is a NO-OP.</p>








				<h4>Implementation of</h4>
				<div class="list"><code><a href="class-React.Socket.ServerInterface.html#_close">React\Socket\ServerInterface::close()</a></code></div>
		</div>
		</div></td>
	</tr>
	</table>

	<table class="summary inherited">
	<caption>Methods inherited from <a href="class-Evenement.EventEmitterInterface.html#methods">Evenement\EventEmitterInterface</a></caption>
	<tr>
		<td><code>
			<a href="class-Evenement.EventEmitterInterface.html#_emit">emit()</a>, 
			<a href="class-Evenement.EventEmitterInterface.html#_listeners">listeners()</a>, 
			<a href="class-Evenement.EventEmitterInterface.html#_on">on()</a>, 
			<a href="class-Evenement.EventEmitterInterface.html#_once">once()</a>, 
			<a href="class-Evenement.EventEmitterInterface.html#_removeAllListeners">removeAllListeners()</a>, 
			<a href="class-Evenement.EventEmitterInterface.html#_removeListener">removeListener()</a>
		</code></td>
	</tr>
	</table>

	<table class="summary used">
	<caption>Methods used from <a href="class-Evenement.EventEmitterTrait.html#methods">Evenement\EventEmitterTrait</a></caption>
	<tr>
		<td><code>
			<a href="class-Evenement.EventEmitterTrait.html#_emit">()</a>, 
			<a href="class-Evenement.EventEmitterTrait.html#_listeners">()</a>, 
			<a href="class-Evenement.EventEmitterTrait.html#_on">()</a>, 
			<a href="class-Evenement.EventEmitterTrait.html#_once">()</a>, 
			<a href="class-Evenement.EventEmitterTrait.html#_removeAllListeners">()</a>, 
			<a href="class-Evenement.EventEmitterTrait.html#_removeListener">()</a>
		</code></td>
	</tr>
	</table>












	<table class="summary used">
	<caption>Properties used from <a href="class-Evenement.EventEmitterTrait.html#properties">Evenement\EventEmitterTrait</a></caption>
	<tr>
		<td><code>
			<a href="class-Evenement.EventEmitterTrait.html#$listeners"><var>$listeners</var></a>
		</code></td>
	</tr>
	</table>




</div>

	<div id="footer">
		Ratchet API documentation generated by <a href="http://apigen.org">ApiGen 2.8.0</a>
	</div>
</div>
</div>
</body>
</html>
